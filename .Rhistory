}) %>% unlist() %>% t()
# intersect and extract state name
centroids$region <- apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) {
tt1_trans[which(col), ]$navn
}) %>% unlist()
centroids <- st_transform(geo_f07, 4326) %>%
st_centroid() %>%
#  st_transform(., '+proj=longlat +ellps=GRS80 +no_defs') %>%
st_geometry() %>%
st_coordinates()
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) {
tt1_trans[which(col), ]$navn
}) %>% unlist()
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) {
tt1_trans[which(col), ]$navn
}) %>% unlist() %>% rbind()
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) {
tt1_trans[which(col), ]$navn
}) %>% unlist() %>% cbind()
centroids$region <- apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) {
tt1_trans[which(col), ]$navn
}) %>% unlist() %>% cbind()
centroids <- st_transform(geo_f07, 4326) %>%
st_centroid() %>%
#  st_transform(., '+proj=longlat +ellps=GRS80 +no_defs') %>%
st_geometry() %>%
st_coordinates()
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) {
tt1_trans[which(col), ]$navn
}) %>% unlist() %>% cbind()
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) {
tt1_trans[which(col), ]$navn
}) %>% unlist() %>% cbind() %>% view()
st_intersects(tt1_trans, pnts_trans, sparse = FALSE)
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) { tt1_trans[which(col), ]$navn})
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) { tt1_trans[which(col), ]$navn}) %>%
unlist()
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) { tt1_trans[which(col), ]$navn}) %>%
unlist(use.names = T)
apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) { tt1_trans[which(col), ]$navn}) %>%
unlist(use.names = F)
lst[sapply(lst, ia.null)] <- NA
# intersect and extract state name
lst <- apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) { tt1_trans[which(col), ]$navn})
lst[sapply(lst, ia.null)] <- NA
lst[sapply(lst, is.null)] <- NA
View(lst)
lst %>%
unlist() %>% cbind() %>% view()
lst[sapply(lst, function(x){x==""})] <- NA
# intersect and extract state name
lst <- apply(st_intersects(tt1_trans, pnts_trans, sparse = FALSE), 2,
function(col) { tt1_trans[which(col), ]$navn})
lst[sapply(lst, function(x){x==""})] <- NA
lst[lapply(lst, function(x){x==""})] <- NA
lapply(lst, function(x){if x=="" then x="a"})
lapply(lst, function(x){if (x=="") x="a"})
sapply(lst, is.null)
lst[sapply(lst, is_empty)] <- NA
View(lst)
lst %>%
unlist() %>% cbind()
centroids$region <- lst %>%  unlist() %>% cbind()
View(centroids)
lst %>%  unlist() %>% cbind()
lst %>%  unlist()
lst
lst %>%  unlist()
centroids$region
centroids <- st_transform(geo_f07, 4326) %>%
st_centroid() %>%
#  st_transform(., '+proj=longlat +ellps=GRS80 +no_defs') %>%
st_geometry() %>%
st_coordinates()
centroids$region <- lst %>%  unlist()
View(centroids)
centroids$region <- class(lst %>%  unlist())
class(lst %>%  unlist())
cbind(centroids, lst %>%  unlist())
cbind(centroids, lst %>%  unlist()) %>% view()
centroids <- st_transform(geo_f07, 4326) %>%
st_centroid() %>%
#  st_transform(., '+proj=longlat +ellps=GRS80 +no_defs') %>%
st_geometry() %>%
st_coordinates()
View(centroids)
cbind(centroids, lst %>%  unlist()) %>% view()
cbind(centroids, lst %>%  unlist(), geo_f07$NAVN) %>% view()
cbind(centroids, lst %>%  unlist(), geo_f07$NAVN)
cbind(centroids, lst %>%  unlist(), geo_f07$NAVN, geo_f07$ADM_KODE)
tibble(centroids, lst %>%  unlist(), geo_f07$NAVN, geo_f07$ADM_KODE)
tibble(centroids, Kommune = lst %>%  unlist(), kommune_f07 = geo_f07$NAVN, kode_f07 = geo_f07$ADM_KODE)
tibble(centroids$X, Kommune = lst %>%  unlist(), kommune_f07 = geo_f07$NAVN, kode_f07 = geo_f07$ADM_KODE)
tibble(centroids$x, Kommune = lst %>%  unlist(), kommune_f07 = geo_f07$NAVN, kode_f07 = geo_f07$ADM_KODE)
tibble(as_tibble(centroids)$x, Kommune = lst %>%  unlist(), kommune_f07 = geo_f07$NAVN, kode_f07 = geo_f07$ADM_KODE)
as_tibble(centroids)$x
as_tibble(centroids)
tibble(as_tibble(centroids)$X, Kommune = lst %>%  unlist(), kommune_f07 = geo_f07$NAVN, kode_f07 = geo_f07$ADM_KODE)
tibble(X=as_tibble(centroids)$X,
Y=as_tibble(centroids)$Y,
Kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE)
tibble(X=as_tibble(centroids)$X,
Y=as_tibble(centroids)$Y,
Kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>% view()
# Placere centroider ------------------------------------------------------
centroids <- st_transform(geo_f07, 4326) %>%
st_centroid() %>%
#  st_transform(., '+proj=longlat +ellps=GRS80 +no_defs') %>%
st_geometry() %>%
st_coordinates() %>% as_tibble()
geo_f07$visueltcenter_x <- centroids$X
geo_f07$visueltcenter_y <- centroids$Y
tibble(centroids
Kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>% view()
tibble(centroids,
Kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>% view()
tibble(centroids,
Kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>% view()
geo_kommune$navn
geo_kommuner$navn
tibble(centroids,
Kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>%
mutate(kommune = case_when(kode_f07==315~ "Holbæk",
kode_f07==411~ "Christiansø",
kode_f07==621~ "Kolding",
kode_f07==659~ "Ringkøbing-Skjern",
kode_f07==779~ "Skive",
kode_f07==831~ "Aalborg"))
tibble(centroids,
Kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>%
mutate(kommune = case_when(kode_f07==315~ "Holbæk",
kode_f07==411~ "Christiansø",
kode_f07==621~ "Kolding",
kode_f07==659~ "Ringkøbing-Skjern",
kode_f07==779~ "Skive",
kode_f07==831~ "Aalborg")) %>% view()
tibble(centroids,
kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>%
mutate(kommune = case_when(kode_f07==315~ "Holbæk",
kode_f07==411~ "Christiansø",
kode_f07==621~ "Kolding",
kode_f07==659~ "Ringkøbing-Skjern",
kode_f07==779~ "Skive",
kode_f07==831~ "Aalborg")) %>% view()
tibble(centroids,
kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>%
mutate(kommune = case_when(kode_f07==315~ "Holbæk",
kode_f07==411~ "Christiansø",
kode_f07==621~ "Kolding",
kode_f07==659~ "Ringkøbing-Skjern",
kode_f07==779~ "Skive",
kode_f07==831~ "Aalborg",
TRUE ~ kommune)) %>% view()
tibble(centroids,
kommune = lst %>%  unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>%
mutate(kommune = case_when(kode_f07==315~ "Holbæk",
kode_f07==411~ "Christiansø",
kode_f07==621~ "Kolding",
kode_f07==659~ "Ringkøbing-Skjern",
kode_f07==779~ "Skive",
kode_f07==831~ "Aalborg",
TRUE ~ kommune))
kom_tabel <- tibble(centroids,
kommune = lst %>% unlist(),
kommune_f07 = geo_f07$NAVN,
kode_f07 = geo_f07$ADM_KODE) %>%
mutate(kommune = case_when(kode_f07==315~ "Holbæk",
kode_f07==411~ "Christiansø",
kode_f07==621~ "Kolding",
kode_f07==659~ "Ringkøbing-Skjern",
kode_f07==779~ "Skive",
kode_f07==831~ "Aalborg",
TRUE ~ kommune))
View(kom_tabel)
kom_tabel$kommune_f07
encoding(kom_tabel)
encoding(kom_tabel$kommune_f07)
Encoding(kom_tabel$kommune_f07)
load("C:/Users/upc6/Documents/GitHub/dagir/data/std_kommuner.rdata")
View(std_kommuner)
data(geo_sogne)
geo_sogne$area <- st_area(geo_sogne)/1000000
1000/10
geo_sogne$beftaethed <- geo_sogne$population/geo_sogne$area
geo_sogne$area <- as.numeric(st_area(geo_sogne)/1000000)
geo_sogne$beftaethed <- geo_sogne$population/geo_sogne$area
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
range(geo_sogne$beftaethed)
ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
scale_fill_viridis_b(breaks=c(0,100,500,1000,5000,10000,50000))+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000))+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
p <- ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
ggsaave(p, file="p.pdf")
ggsave(p, file="p.pdf")
getwd
getwd()
View(geo_kommuner)
View(geo_kommuner)
remotes::install_github("tylermorganwall/rayshader")
library(rayshader)
library(ggplot2)
library(tidyverse)
gg = ggplot(diamonds, aes(x, depth)) +
stat_density_2d(aes(fill = stat(nlevel)),
geom = "polygon",
n = 100,bins = 10,contour = TRUE) +
facet_wrap(clarity~.) +
scale_fill_viridis_c(option = "A")
plot_gg(gg,multicore=TRUE,width=5,height=5,scale=250)
p
gg
plot_gg(p,multicore=TRUE,width=5,height=5,scale=250)
p <- ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000))+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
plot_gg(p,multicore=TRUE,width=5,height=5,scale=250)
p <- ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed), size = 0.05) +
scale_fill_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
plot_gg(p,multicore=TRUE,width=5,height=5,scale=250)
p <- ggplot(data = geo_sogne) +
geom_sf(color = "white", aes(fill=beftaethed,color=beftaethed), size = 0.05) +
scale_fill_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed,color=beftaethed), size = 0.05) +
scale_fill_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Km\U00B2")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed,color=beftaethed)) +
scale_fill_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed,color=beftaethed)) +
scale_fill_viridis_c()+
scale_color_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
plot_gg(p,multicore=TRUE,width=7,height=7,scale=250)
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed,color=beftaethed)) +
scale_fill_viridis_c(trans = "log")+
scale_color_viridis_c(trans = "log")+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
plot_gg(p,multicore=TRUE,width=5,height=5,scale=250)
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed,color=beftaethed, alpha=beftaethed)) +
scale_fill_viridis_c()+
scale_color_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, alpha=beftaethed)) +
scale_fill_viridis_c()+
scale_color_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, alpha=beftaethed), color="white") +
scale_fill_viridis_c()+
scale_color_viridis_c()+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, alpha=beftaethed), color="white") +
scale_fill_brewer(palette = "Blues")+
scale_color_brewer(palette = "Blues")+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, color=beftaethed), color="white") +
scale_fill_brewer(palette = "Blues")+
scale_color_brewer(palette = "Blues")+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, color=beftaethed), color="white") +
scale_fill_fermenter(palette = "Blues")+
scale_color_fermenter(palette = "Blues")+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, color=beftaethed), color="white") +
scale_fill_fermenter(palette = "Blues", direction=-1)+
scale_color_fermenter(palette = "Blues", direction=-1)+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, color=beftaethed), color="white") +
scale_fill_fermenter(palette = "Blues", direction=1)+
scale_color_fermenter(palette = "Blues", direction=1)+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne %>% mutate(beftaethed=if_else(beftaethed>8000,8000,beftaethed))) +
geom_sf(aes(fill=beftaethed, color=beftaethed), color="white") +
scale_fill_fermenter(palette = "Blues", direction=1)+
scale_color_fermenter(palette = "Blues", direction=1)+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne %>% mutate(beftaethed=if_else(beftaethed>4000,4000,beftaethed))) +
geom_sf(aes(fill=beftaethed, color=beftaethed), color="white") +
scale_fill_fermenter(palette = "Blues", direction=1)+
scale_color_fermenter(palette = "Blues", direction=1)+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p <- ggplot(data = geo_sogne %>% mutate(beftaethed=if_else(beftaethed>4000,4000,beftaethed))) +
geom_sf(aes(fill=beftaethed, color=beftaethed)) +
scale_fill_fermenter(palette = "Blues", direction=1)+
scale_color_fermenter(palette = "Blues", direction=1)+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne %>% mutate(beftaethed=if_else(beftaethed>6000,6000,beftaethed))) +
geom_sf(aes(fill=beftaethed, color=beftaethed)) +
scale_fill_fermenter(palette = "Blues", direction=1)+
scale_color_fermenter(palette = "Blues", direction=1)+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne %>% mutate(beftaethed=if_else(beftaethed>2000,2000,beftaethed))) +
geom_sf(aes(fill=beftaethed, color=beftaethed)) +
scale_fill_fermenter(palette = "Blues", direction=1)+
scale_color_fermenter(palette = "Blues", direction=1)+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
p <- ggplot(data = geo_sogne) +
geom_sf(aes(fill=beftaethed, color=beftaethed)) +
scale_fill_fermenter(palette = "Blues", direction=1,trans="log")+
scale_color_fermenter(palette = "Blues", direction=1,trans="log")+
#scale_fill_viridis_b(breaks=c(0,10,50,100,500,1000,5000,10000,50000), trans = "log")+
#geom_text(aes(label=round(beftaethed,2), x=visueltcenter_x, y=visueltcenter_y), color="white")+
theme_void()
p
sf::st_intersection(geo_postnumre, geo_regioner)
cropped <- sf::st_intersection(geo_postnumre, geo_regioner)
ggplot(data = cropped) +
geom_sf(color="white",fill="grey30") +
theme_void()
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=as.numeric(area)), size = 0.05) +
geom_text(aes(label=round(as.numeric(area),2), x=visueltcenter_x, y=visueltcenter_y), color="white", size=3)+
labs(fill="Km\U00B2")+
theme_void()
geo$area <- st_area(geo)/1000000
data(geo_sogne)
geo <- subset(geo_sogne,subset = geo_sogne$area=="København Municipality")
ggplot() +
geom_sf(data = geo, color = "white", aes(fill=avg_age), size = 0.05) +
scale_fill_viridis_b("Alder",breaks=seq(30,70,4))+
labs(fill="Gennemsnitsalder\npr. sogn", title="København") +
theme_void()
load(url("https://github.com/sebastianbarfort/mapDK/blob/master/data/benches.rda?raw=true"))
ggplot() +
geom_sf(data = geo, color = "white", fill="grey30", size = 0.05) +
geom_point(data=benches, aes(lon,lat), color="cornflowerblue", size=0.5)+
labs(title="Bænke i København", subtitle="Mon det er muligt at tælle hvor mange bænke der er i hver sogn?") +
theme_void()
library(sf)
benches_st <- st_as_sf(benches, coords = c("lon", "lat"), crs = 4326, agr = "constant")
geo$pt_count <- lengths(st_intersects(geo, benches_st))
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=pt_count), size = 0.05) +
#geom_point(data=benches, aes(lon,lat), color="cornflowerblue", size=0.5)+
geom_text(aes(label=pt_count, x=visueltcenter_x, y=visueltcenter_y), color="white")+
labs(fill="Bænke")+
theme_void()
geo$area <- st_area(geo)/1000000
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=as.numeric(area)), size = 0.05) +
geom_text(aes(label=round(as.numeric(area),2), x=visueltcenter_x, y=visueltcenter_y), color="white", size=3)+
labs(fill="Km\U00B2")+
theme_void()
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=as.numeric(area)), size = 0.05) +
geom_text(aes(label=round(as.numeric(area),2), x=visueltcenter_x, y=visueltcenter_y), color="white", size=4)+
labs(fill="Km\U00B2")+
theme_void()
ggplot(data = geo_f07) +
geom_sf(color = "white", fill="grey30", size = 0.05) +
theme_void()
ggplot(data = geo_f07) +
geom_sf(color = "red", fill="white", size = 0.05) +
theme_void()
ggplot(data = geo_f07) +
geom_sf(color = "grey30", fill="white", size = 0.05) +
theme_void()
geo <- subset(geo_sogne,subset = geo_sogne$area=="Nordjylland Municipality")
geo$area <- st_area(geo)/1000000
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=as.numeric(area)), size = 0.05) +
geom_text(aes(label=round(as.numeric(area),2), x=visueltcenter_x, y=visueltcenter_y), color="white", size=4)+
labs(fill="Km\U00B2")+
theme_void()
View(geo_sogne)
geo <- subset(geo_sogne,subset = geo_sogne$area=="Aalborg Municipality")
geo$area <- st_area(geo)/1000000
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=as.numeric(area)), size = 0.05) +
geom_text(aes(label=round(as.numeric(area),2), x=visueltcenter_x, y=visueltcenter_y), color="white", size=4)+
labs(fill="Km\U00B2")+
theme_void()
ggplot(data = geo) +
geom_sf(color = "white", aes(fill=as.numeric(area)), size = 0.05) +
geom_text(aes(label=round(as.numeric(area),1), x=visueltcenter_x, y=visueltcenter_y), color="white", size=4)+
labs(fill="Km\U00B2")+
theme_void()
