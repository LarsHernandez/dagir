"0","me9 <- data %>% filter(sector==200, substr(atc_code,1,1)==""L"") %>% "
"0","  full_join(atc_codes, by=""atc_code"") %>% "
"0","  group_by(name) %>% "
"0","  mutate(biologic = if_else(str_detect(name,""mab""),T,F)) %>% "
"0","  group_by(year,name) %>%"
"0","  summarize(totyr=sum(cost_adj, na.rm=T),"
"0","            biologic=first(biologic)) %>% "
"0","  group_by(year) %>% "
"0","  summarize(""Biologics""  = sum(totyr[biologic], na.rm=T),"
"0","            ""Chemical drugs"" = sum(totyr[!biologic], na.rm=T)) %>%  "
"0","  gather(variable, value,-year) %>% "
"0","  ggplot(aes(year,value, fill=fct_relevel(variable, ""Chemical drugs""))) + "
"0","  geom_col(position=""fill"", width=0.7) + "
"0","  scale_y_continuous(label=scales::percent_format())+"
"0","  scale_x_continuous(breaks=c(seq(1997,2019,2))) + "
"0","  labs(fill=NULL, y=""Percent of total\ncosts"", x=NULL) + "
"0","  scale_fill_brewer(palette=""Paired"") + th1"
"0","me9"
"2","Warning:"
"2"," Removed 2 rows containing missing values (position_stack).
"
